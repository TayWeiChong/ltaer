<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ltaer: Core Functions • ltaer</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" integrity="sha256-eZrrJcwDc/3uDhsdt61sL2oOBY362qM3lon1gyExkL0=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="ltaer: Core Functions">
<meta property="og:description" content="">
<meta property="og:image" content="/logo.png">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">ltaer</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/corefunctions.html">ltaer: Core Functions</a>
    </li>
    <li>
      <a href="../articles/ltaerviz.html">ltaer: Visualisations</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>ltaer: Core Functions</h1>
                        <h4 class="author">Shaun Khoo</h4>
            
            <h4 class="date">2018-12-12</h4>
      
      
      <div class="hidden name"><code>corefunctions.Rmd</code></div>

    </div>

    
    
<div id="working-with-lta-datamalls-apis" class="section level2">
<h2 class="hasAnchor">
<a href="#working-with-lta-datamalls-apis" class="anchor"></a>0. Working with LTA Datamall’s APIs</h2>
<div id="api-key" class="section level4">
<h4 class="hasAnchor">
<a href="#api-key" class="anchor"></a>API Key</h4>
<p>All API calls to the LTA Datamall, and thus all core functions in this package, require an API key. In layman terms, the API key is like a username/password with which you access the API. It helps the API developers to identify who is accessing the API, and to restrict access if they wish. As such, it is really important that you keep your API key <strong>private</strong> (don’t share it with anyone else or post it online!).</p>
<p>As such, in order to use this package, please sign up for an API key <a href="https://www.mytransport.sg/content/mytransport/home/dataMall/request-for-api.html">here</a>. The process is quick, easy and straightforward.</p>
<p>You will notice that in the examples provided below, my API key is saved as <code><a href="https://www.rdocumentation.org/packages/base/topics/Sys.getenv">Sys.getenv('LTA_DATAMALL_KEY')</a></code>. This is one way to keep the API key private, and you can find out more about how to do this <a href="https://daattali.gitbooks.io/stat545-ubc-github-io/bit003_api-key-env-var.html">here</a>.</p>
</div>
<div id="api-documentation" class="section level4">
<h4 class="hasAnchor">
<a href="#api-documentation" class="anchor"></a>API Documentation</h4>
<p>Finally, please read this vignette alongside LTA’s documentation for their APIs, which you can find <a href="https://www.mytransport.sg/content/dam/datamall/datasets/LTA_DataMall_API_User_Guide.pdf">here</a>. This will help you understand the outputs you are receiving from the APIs you are calling. By default, all functions in <code>ltaer</code> return all the data that the API returns, so you do not have to worry about missing out on any data from using this package.</p>
</div>
<div id="installing-this-package" class="section level4">
<h4 class="hasAnchor">
<a href="#installing-this-package" class="anchor"></a>Installing this package</h4>
<p>This package is not available on CRAN (this is where you typically download R packages from when you run <code>install.package('pkgname')</code>). Due to a lack of time on my end, it is unlikely that <code>ltaer</code> will ever be made available on CRAN either. The only way you can get <code>ltaer</code> working on your RStudio is to use the following code:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/utils/topics/install.packages">install.packages</a></span>(<span class="st">'devtools'</span>)
devtools::<span class="kw">install_github</span>(<span class="st">'shaunkhoo/ltaer'</span>)</code></pre></div>
<p>This will download the <code>ltaer</code> package directly from my Github repository and into your RStudio. Thereafter, you simply load the package in the same way as any other package, by entering <code><a href="https://www.rdocumentation.org/packages/base/topics/library">library(ltaer)</a></code>.</p>
</div>
</div>
<div id="bus-arrival-timings" class="section level2">
<h2 class="hasAnchor">
<a href="#bus-arrival-timings" class="anchor"></a>1. Bus Arrival Timings</h2>
<p>Probably the most well-utilised API of the lot, the Bus Arrival API enables users to retrieve bus arrival timings for any bus stop in Singapore. There are some specific things to mention here about the API (you can also find this in the documentation):</p>
<ul>
<li>For each bus service serving that bus stop, the bus arrival details (timing, coordinates, type, load etc) are reported for the next three buses. If there are only one or two ‘next buses’ left (usually around 11pm-1am), then the bus arrival details for those ‘next bus’ slots will be NA.</li>
<li>All bus services where the last bus has passed the chosen bus stop will no longer show up on the Bus Arrivals API for that bus stop. This usually happens around 12am-1am, except for NightRider services which end at 3am-4am.</li>
<li>If there are no bus services at all, then the API will return an empty JSON file.</li>
</ul>
<p>There are some important differences between this package’s wrapper function, <code>getBusTimings</code>, and the API itself:</p>
<ul>
<li>
<code>getBusTimings</code> automatically calls all the API for all bus services for a given bus stop code. In the API, you can specify which service you want to check for each bus stop. I’ve dropped this option as R users can simply filter for the bus service number.</li>
<li>
<code>getBusTimings</code> conveniently allows users to call the API for multiple bus stops. This is done by simply repeating the API call for all the bus stops specified. You simply need to pass in a vector of bus codes and <code>getBusTimings</code> will return you a dataframe containing all the data returned. The first column, <code>BusStopCode</code>, will help you distinguish between the various bus stops.</li>
<li>
<code>getBusTimings</code> requires you to pass the bus stop code as a character string, and not as a numeric value. This is to avoid potential issues when the bus stop code has leading zeros, which R truncates automatically for numeric values.</li>
</ul>
<p>I provide an example below of the output you can expect from <code>getBusTimings</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw"><a href="https://www.rdocumentation.org/packages/base/topics/library">library</a></span>(ltaer)

<span class="co"># The following code is commented out as it may not work all the time. The output has been saved in this package as 'bus_arrivals' for your use.</span>
<span class="co"># bus_arrivals &lt;- getBusTimings(c('07531', '09047', '11239', '14151', '66451', '44289', '50021', '54269', '03019', '09022', '41029'), api_key = Sys.getenv('LTA_DATAMALL_KEY'))</span>

<span class="co"># Note that I've transposed the dataframe (the columns are the rows and vice versa) for clarity of presentation.</span>
<span class="co">#knitr::kable(t(bus_arrivals[1:3,]))</span></code></pre></div>
</div>
<div id="bus-services" class="section level2">
<h2 class="hasAnchor">
<a href="#bus-services" class="anchor"></a>2. Bus Services</h2>
<p>This API returns service information for all buses currently in operation in Singapore. The data available here is similar to those you find on the information boards at each bus stop.</p>
<p><code>getBusServices</code> is the wrapper function for this API, and takes in the API key as its only argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">
<span class="co"># Note that I've transposed the dataframe (the columns are the rows and vice versa) for clarity of presentation.</span>
<span class="co">#knitr::kable(t(bus_services[1:9,]))</span></code></pre></div>
</div>
<div id="bus-routes" class="section level2">
<h2 class="hasAnchor">
<a href="#bus-routes" class="anchor"></a>3. Bus Routes</h2>
<p>This API returns route information for all services currently in operation in Singapore. The data here is quite useful as they provide each bus stop code and stop sequence for each bus service, so you can plot out the full route for each bus service. While this is already quite useful, it would have been even better if route polylines were provided as well.</p>
<p><code>getBusRoutes</code> is the wrapper function for this API, and takes in the API key as its only argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># The following code is commented out as it takes a long time to retrieve all the routes. The output has been saved in this package as 'bus_routes' for your use.</span>
<span class="co"># bus_routes &lt;- getBusRoutes(Sys.getenv('LTA_DATAMALL_KEY'))</span>

<span class="co"># Note that I've transposed the dataframe (the columns are the rows and vice versa) for clarity of presentation.</span>
<span class="co">#knitr::kable(bus_routes[1:9,])</span></code></pre></div>
</div>
<div id="bus-stops" class="section level2">
<h2 class="hasAnchor">
<a href="#bus-stops" class="anchor"></a>4. Bus Stops</h2>
<p>This API returns information for all bus stops currently being serviced by buses in Singapore, such as bus stop codes, coordinates and road names.</p>
<p><code>getBusStops</code> is the wrapper function for this API, and takes in the API key as its only argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#knitr::kable(head(bus_stops))</span></code></pre></div>
</div>
<div id="passenger-volume-buses" class="section level2">
<h2 class="hasAnchor">
<a href="#passenger-volume-buses" class="anchor"></a>5. Passenger Volume (Buses)</h2>
<p>There are two</p>
</div>
<div id="passenger-volume-trains" class="section level2">
<h2 class="hasAnchor">
<a href="#passenger-volume-trains" class="anchor"></a>6. Passenger Volume (Trains)</h2>
</div>
<div id="taxi-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#taxi-availability" class="anchor"></a>7. Taxi Availability</h2>
<p>This API returns the coordinates for all available taxis that are available for hire in Singapore (excludes hired and ‘busy’ taxis).</p>
<p><code>getTaxiAvail</code> is the wrapper function for this API, and takes in the API key as its only argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#knitr::kable(head(taxi_avail))</span></code></pre></div>
</div>
<div id="carpark-availability" class="section level2">
<h2 class="hasAnchor">
<a href="#carpark-availability" class="anchor"></a>8. Carpark Availability</h2>
<p>This API returns the coordinates for all available taxis that are available for hire in Singapore (excludes hired and ‘busy’ taxis).</p>
<p><code>getTaxiAvail</code> is the wrapper function for this API, and takes in the API key as its only argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co">#knitr::kable(head(taxi_avail))</span></code></pre></div>
</div>
<div id="erp-rates" class="section level2">
<h2 class="hasAnchor">
<a href="#erp-rates" class="anchor"></a>9. ERP Rates</h2>
<p>This API</p>
</div>
<div id="section" class="section level2">
<h2 class="hasAnchor">
<a href="#section" class="anchor"></a>10.</h2>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#working-with-lta-datamalls-apis">0. Working with LTA Datamall’s APIs</a></li>
      <li><a href="#bus-arrival-timings">1. Bus Arrival Timings</a></li>
      <li><a href="#bus-services">2. Bus Services</a></li>
      <li><a href="#bus-routes">3. Bus Routes</a></li>
      <li><a href="#bus-stops">4. Bus Stops</a></li>
      <li><a href="#passenger-volume-buses">5. Passenger Volume (Buses)</a></li>
      <li><a href="#passenger-volume-trains">6. Passenger Volume (Trains)</a></li>
      <li><a href="#taxi-availability">7. Taxi Availability</a></li>
      <li><a href="#carpark-availability">8. Carpark Availability</a></li>
      <li><a href="#erp-rates">9. ERP Rates</a></li>
      <li><a href="#section">10.</a></li>
      </ul>
</div>
      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Shaun Khoo.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.3.0.9000.</p>
</div>
      </footer>
</div>

  

  </body>
</html>
